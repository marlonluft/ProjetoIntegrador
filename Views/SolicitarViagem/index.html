<div class="form-horizontal">

    <div class="row">
        <div class="col-lg-12">

            <table id="tableStatus">
                <tr>
                    <td>
                        <span class="fa-stack fa-stack fa-2x" ng-style="{'color':CoresStatus(0, Solicitacao.Status)}">
                            <i class="fa fa-circle fa-stack-2x"></i>
                            <i class="fa fa-stack-1x fa-inverse" ng-class="IconeStatus(0, Solicitacao.Status, 'fa-pencil')"></i>
                        </span>
                    </td>
                    <td>
                    <span class="fa-stack fa-stack fa-2x" ng-style="{'color':CoresStatus(1, Solicitacao.Status)}">
                            <i class="fa fa-circle fa-stack-2x"></i>
                            <i class="fa fa-stack-1x fa-inverse" ng-class="IconeStatus(1, Solicitacao.Status, 'fa-plane')"></i>
                        </span>
                    </td>
                    <td>
                        <span class="fa-stack fa-stack fa-2x" ng-style="{'color':CoresStatus(3, Solicitacao.Status)}">
                            <i class="fa fa-circle fa-stack-2x"></i>
                            <i class="fa fa-stack-1x fa-inverse" ng-class="IconeStatus(3, Solicitacao.Status, 'fa-money')"></i>
                        </span>
                    </td>
                    <td>
                    <span class="fa-stack fa-stack fa-2x" ng-style="{'color':CoresStatus(4, Solicitacao.Status)}">
                            <i class="fa fa-circle fa-stack-2x"></i>
                            <i class="fa fa-stack-1x fa-inverse" ng-class="IconeStatus(4, Solicitacao.Status, 'fa-gavel')"></i>
                        </span>
                    </td>
                    <td>
                        <span class="fa-stack fa-stack fa-2x" ng-style="{'color':CoresStatus(6, Solicitacao.Status)}">
                            <i class="fa fa-circle fa-stack-2x"></i>
                            <i class="fa fa-stack-1x fa-inverse" ng-class="IconeStatus(6, Solicitacao.Status, 'fa-flag')"></i>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td>Solicitação de Viagem</td>
                    <td>Aprovação de Viagem</td>
                    <td>Prestação de Contas</td>
                    <td>Aprovação de Contas</td>
                    <td>Solicitação Finalizada</td>
                </tr>
            </table>

            
        </div>
    </div>

    <div class="row">
        <div class="col-lg-12">
            <div class="page-header">
                <h4 id="typography">Solicitação de Viagem</h4>
            </div>
        </div>
    </div>

    <div class="panel panel-danger" ng-if="Solicitacao.Justificativa.length > 0 && Solicitacao.Status == 2">
        <div class="panel-heading">
            <h3 class="panel-title">Justificativa Reprovação</h3>
        </div>
        <div class="panel-body" ng-bind="Solicitacao.Justificativa"></div>
    </div>

    <div class="form-group">
        <label class="control-label col-md-2" for="txtOrigem">UF Origem</label>
        <div class="col-md-10">
            <select class="form-control" ng-model="Solicitacao.UfOrigem" ng-disabled="!EditarViagem">
                <option ng-value="uf" value="{{uf}}" ng-repeat="uf in ufLista">{{uf}}</option>
            </select>
        </div>
    </div>

    <div class="form-group">
        <label class="control-label col-md-2" for="txtOrigem">Origem</label>
        <div class="col-md-10">
            <input class="form-control text-box single-line" id="txtOrigem" type="text" ng-model="Solicitacao.CidadeOrigem" ng-disabled="!EditarViagem" />
        </div>
    </div>

    <div class="form-group">
        <label class="control-label col-md-2" for="txtOrigem">UF Destino</label>
        <div class="col-md-10">
            <select class="form-control" ng-model="Solicitacao.UfDestino" ng-disabled="!EditarViagem">
                <option ng-value="uf" value="{{uf}}" ng-repeat="uf in ufLista">{{uf}}</option>
            </select>
        </div>
    </div>

    <div class="form-group">
        <label class="control-label col-md-2" for="txtDestino">Destino</label>
        <div class="col-md-10">
            <input class="form-control text-box single-line" id="txtDestino" type="text" ng-model="Solicitacao.CidadeDestino" ng-disabled="!EditarViagem" />
        </div>
    </div>

    <div class="form-group">
        <label class="control-label col-md-2" for="txtDataIda">Data Ida</label>
        <div class="col-md-10">
            <input class="form-control text-box single-line" id="txtDataIda" type="date" ng-model="Solicitacao.DataIda" ng-disabled="!EditarViagem" />
        </div>
    </div>

    <div class="form-group">
        <label class="control-label col-md-2" for="txtDataVolta">Data Volta</label>
        <div class="col-md-10">
            <input class="form-control text-box single-line" id="txtDataVolta" type="date" ng-model="Solicitacao.DataVolta" ng-disabled="!EditarViagem" />
        </div>
    </div>

    <div class="form-group">
        <label class="control-label col-md-2" for="txtMotivo">Motivo</label>
        <div class="col-md-10">
            <select class="form-control" id="txtMotivo" ng-model="Solicitacao.Motivo" ng-disabled="!EditarViagem">
                    <option selected="selected">Reunião</option>
                    <option>Apresentação</option>
                    <option>Workshop</option>
                    <option>Evento</option>
                    <option>Outro</option>
                </select>
        </div>
    </div>

    <div class="form-group">
        <label class="control-label col-md-2" for="txtObservacoes">Observações</label>
        <div class="col-md-10">
            <textarea class="form-control" style="width: 500px; height: 100px;" rows="5" id="txtObservacoes" ng-model="Solicitacao.Observacao" ng-disabled="!EditarViagem"></textarea>
        </div>
    </div>

    <div id="tituloPrestacaoContas" class="row">
        <div class="col-lg-12">
            <div class="page-header">
                <h4 ng-bind="Solicitacao.Status <= 1 ? 'Previsão de Contas' : 'Prestação de Contas'"></h4>
            </div>
        </div>
    </div>

    <div class="panel panel-danger" ng-if="Solicitacao.Justificativa.length > 0 && Solicitacao.Status == 5">
        <div class="panel-heading">
            <h3 class="panel-title">Justificativa Reprovação</h3>
        </div>
        <div class="panel-body" ng-bind="Solicitacao.Justificativa"></div>
    </div>

    <div class="col-lg-12" style="margin-bottom: 30px;" ng-if="EditarContas">
        <div class="col-lg-3">
            <label class="control-label" for="txtCategoria">Categoria</label>
            <select class="form-control" id="txtCategoria" ng-model="conta.Tipo">
                <option ng-repeat="item in categorias" ng-value="item.value" ng-bind="item.text"></option>
            </select>
        </div>
        <div class="col-lg-3">
            <label class="control-label" for="txtQuantidade">Quantidade</label>
            <input class="form-control" id="txtQuantidade" type="number" min="1" value="1" ng-model="conta.Quantidade">
        </div>
        <div class="col-lg-3">
            <label class="control-label" for="txtValor">Valor</label>
            <input class="form-control" id="txtValor" type="text" value="" ng-model="conta.Valor">
        </div>

        <div class="col-lg-1" style="line-height: 65px;">
            <button class="btn btn-primary" data-toggle="tooltip" title="Adicionar Conta" ng-click="adicionarPrestacaoConta(conta); $event.stopPropagation();">
                <i class="fa fa-plus" aria-hidden="true"></i>
                Adicionar Conta
            </button>
        </div>
    </div>
    <div class="col-lg-12 table-responsive">
        <table class="table table-striped table-hover ">
            <thead>
                <tr>
                    <th>Categoria</th>
                    <th>Quantidade</th>
                    <th title="Valor Solicitado">Valor Solicitado</th>
                    <th ng-if="Solicitacao.Status >= 3" title="Valor Prestado">Valor Prestado</th>
                    <th style="text-align: center;">Ação</th>
                </tr>
            </thead>
            <tfoot>
                <tr ng-show="Solicitacao.Custos.length > 0">
                    <td colspan="2" style="text-align: right;">Valor Total:</td>
                    <td id="txtValorTotalS" ng-bind="CustoTotalS | currency:'R$ '" ng-init="0" style="text-align: left;"></td>
                    <td ng-if="Solicitacao.Status >= 3" id="txtValorTotalP" ng-bind="CustoTotalP | currency:'R$ '" ng-init="0" style="text-align: left;"></td>
                    <td style="text-align: center;"><span ng-if="Solicitacao.Status >= 3">Resultado: <span id="txtValorResultado" ng-bind="CustoResultado" ng-style="{'color': ResultadoCor}" style="font-style: italic;"></span></span></td>
                </tr>
                <tr ng-show="Solicitacao.Custos.length == 0">
                    <td colspan="4" style="text-align: center;">
                        Nenhuma prestação de conta cadastrada.
                    </td>
                </tr>
            </tfoot>
            <tbody>
                <tr ng-repeat="conta in Solicitacao.Custos track by conta.Ordem">
                    <td ng-bind="recupearDescricaoCategoria(conta.TipoI)"></td>
                    <td ng-bind="conta.Quantidade"></td>
                    <td ng-bind="conta.ValorSolicitado"></td>
                    <td ng-if="Solicitacao.Status >= 3">
                        <span ng-if="Solicitacao.Status != 3 || conta.NovaPrestacao" ng-bind="conta.ValorPrestado"></span>
                        <input ng-if="Solicitacao.Status == 3 && !conta.NovaPrestacao" class="form-control valorPrestado" type="text" value="" ng-model="conta.ValorPrestado">
                    </td>
                    <td style="text-align: center;">
                        <button class="btn btn-danger btn-sm" data-toggle="tooltip" title="Remover" ng-if="(EditarContas && Solicitacao.Status == 0) || conta.NovaPrestacao" ng-click="removerPrestacaoConta(conta.Ordem);">
                            <i class="fa fa-trash" aria-hidden="true"></i>
                        </button>
                        <lable ng-if="(!EditarContas || Solicitacao.Status === 3) && !conta.NovaPrestacao">N/A</lable>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="form-group">        
        <div class="col-md-12" style="text-align: center;">
            <button class="btn btn-success" ng-if="(Solicitacao.Status == 0 || Solicitacao.Status == 3) && Solicitacao.Custos.length > 0" data-toggle="tooltip" title="Enviar para Aprovação" ng-click="enviarAprovacao(Solicitacao)">
                <i class="fa fa-check" aria-hidden="true"></i>
                <!-- Somente status aberto e aberto para custos -->
                Enviar para Aprovação {{Solicitacao.Status == 3 ? 'de Custos' : ''}}
            </button>
            <button class="btn btn-primary" ng-if="!PerfilGestor && (Solicitacao.Status == 0)" data-toggle="tooltip" title="Salvar" ng-click="enviarSalvar(0)">
                <i class="fa fa-floppy-o" aria-hidden="true"></i>
                Salvar
            </button>
            <button class="btn btn-danger" ng-if="!PerfilGestor && (Solicitacao.Status == 0 && Solicitacao.Id >= 0)" data-toggle="tooltip" title="Remover" ng-click="removerSolicitacao(Solicitacao)">
                <i class="fa fa-trash" aria-hidden="true"></i>
                Remover
            </button>

            <button class="btn btn-success" ng-if="PerfilGestor && (Solicitacao.Status == 1 || Solicitacao.Status == 4)" data-toggle="tooltip" title="Aprovar" ng-click="enviarSalvar(2)">
                <i class="fa fa-thumbs-o-up" aria-hidden="true"></i>
                Aprovar
            </button>

            <button class="btn btn-danger" ng-if="PerfilGestor && (Solicitacao.Status == 1 || Solicitacao.Status == 4)" data-toggle="tooltip" title="Reprovar" ng-click="reprovarSolicitacao(Solicitacao)">
                <i class="fa fa-thumbs-o-down" aria-hidden="true"></i>
                Reprovar
            </button>
        </div>
    </div>
</div>
<div>
    <a href="{{menuColaborador}}" class="btn btn-default">Voltar</a>
</div>

<!-- MODAL REPROVAR -->
<div id="modalReprovar" class="modal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">Reprovar</h4>
            </div>
            <div class="modal-body">

                <div class="form-group">
                    <label class="control-label" for="txtMotivo">Digite o motivo da reprovação:</label>
                    <textarea class="form-control" style="min-width: 100%; height: 100px;" ng-model="Solicitacao.Justificativa" rows="5" id="txtMotivo"></textarea>
                </div>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
                <button type="button" class="btn btn-danger" ng-click="confirmarReprovarSolicitacaoViagem()">Reprovar</button>
            </div>
        </div>
    </div>
</div>

<!-- MODAL REMOVER Prestação de Contas -->
<div id="modalRemoverConta" class="modal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title">Remover prestação de conta</h4>
                </div>
                <div class="modal-body">
    
                    Você tem certeza que deseja remover esta prestação de conta? Esta ação não poderá ser desfeita.
    
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-danger" ng-click="confirmarRemoverPrestacaoConta()">Remover</button>
                </div>
            </div>
        </div>
    </div>

<!-- MODAL REMOVER -->
<div id="modalRemover" class="modal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">Remover item</h4>
            </div>
            <div class="modal-body">

                Você tem certeza que deseja remover esta solicitação de viagem? Esta ação não poderá ser desfeita.

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
                <button type="button" class="btn btn-danger" ng-click="confirmarRemoverSolicitacao()">Remover</button>
            </div>
        </div>
    </div>
</div>

<!-- MODAL ENVIAR APROVAÇÃO -->
<div id="modalEnviarAprovacao" class="modal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">Enviar para aprovação</h4>
            </div>
            <div class="modal-body">

                Você tem certeza que deseja enviar para aprovação? Após esta ação você não poderá mais realizar alterações.

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
                <button type="button" class="btn btn-success" ng-click="enviarSalvar(2)">Enviar</button>
            </div>
        </div>
    </div>
</div>